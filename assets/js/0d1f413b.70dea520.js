"use strict";(self.webpackChunkkro_docs=self.webpackChunkkro_docs||[]).push([[5084],{11521:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"examples/kubernetes/job-example","title":"job-example","description":"ResourceGraphDefinition","source":"@site/versioned_docs/version-0.7.1/examples/kubernetes/job-example.md","sourceDirName":"examples/kubernetes","slug":"/examples/kubernetes/job-example","permalink":"/kro/examples/kubernetes/job-example","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-sigs/kro/tree/main/website/versioned_docs/version-0.7.1/examples/kubernetes/job-example.md","tags":[],"version":"0.7.1","sidebarPosition":708,"frontMatter":{"sidebar_position":708},"sidebar":"examplesSidebar","previous":{"title":"SaaS Multi-Tenant","permalink":"/kro/examples/kubernetes/saas-multi-tenant"}}');var s=t(74848),o=t(28453);const r={sidebar_position:708},i=void 0,c={},p=[];function l(e){const n={code:"code",pre:"pre",...(0,o.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"ResourceGraphDefinition"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kro",metastring:'title="rgd.yaml"',children:'apiVersion: kro.run/v1alpha1\nkind: ResourceGraphDefinition\nmetadata:\nname: job-deployment.kro.run\nspec:\nschema:\n  apiVersion: v1alpha1\n  kind: JobDeployment\n  spec:\n    replicas: integer | default=1\n    delayInSeconds: integer | default=30\nresources:\n- id: job\n  readyWhen:\n    - ${job.status.completionTime != null}\n  template:\n    apiVersion: batch/v1\n    kind: Job\n    metadata:\n      name: ${schema.metadata.name}-job\n    spec:\n      # NOTE: will not work if we delete the job after it finishes. It will try to recreate the job.\n      #ttlSecondsAfterFinished: 30\n      template:\n        spec:\n          restartPolicy: Never\n          containers:\n          - name: sleeper\n            image: busybox\n            command: ["sleep", "${string(schema.spec.delayInSeconds)}"]\n            resources:\n              limits:\n                cpu: "1"\n- id: deployment\n  template:\n    apiVersion: apps/v1\n    kind: Deployment\n    metadata:\n      name: ${schema.metadata.name}\n    spec:\n      replicas: ${schema.spec.replicas}\n      selector:\n        matchLabels:\n          app: ${schema.metadata.name}\n      template:\n        metadata:\n          labels:\n            app: ${schema.metadata.name}\n        spec:\n          containers:\n          - name: web\n            image: nginx\n            ports:\n            - containerPort: 80\n'})})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var a=t(96540);const s={},o=a.createContext(s);function r(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);