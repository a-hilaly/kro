"use strict";(self.webpackChunkkro_docs=self.webpackChunkkro_docs||[]).push([[2899],{22567:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"docs/concepts/rgd/resource-definitions/resource-basics","title":"Basics","description":"Resources define the Kubernetes objects that kro creates and manages when users instantiate your custom API. Each resource is valid Kubernetes YAML with CEL expressions for dynamic values, enabling full type checking and validation before any resources are deployed.","source":"@site/docs/docs/concepts/rgd/02-resource-definitions/01-resource-basics.md","sourceDirName":"docs/concepts/rgd/02-resource-definitions","slug":"/docs/concepts/rgd/resource-definitions/resource-basics","permalink":"/kro/next/docs/concepts/rgd/resource-definitions/resource-basics","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-sigs/kro/tree/main/website/docs/docs/concepts/rgd/02-resource-definitions/01-resource-basics.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Schema Definition","permalink":"/kro/next/docs/concepts/rgd/schema"},"next":{"title":"Conditionals","permalink":"/kro/next/docs/concepts/rgd/resource-definitions/conditional-creation"}}');var r=s(74848),t=s(28453),i=s(11470),c=s(19365);const l={sidebar_position:1},o="Basics",d={},p=[{value:"Resource Structure",id:"resource-structure",level:2},{value:"Resource Templates with CEL",id:"resource-templates-with-cel",level:2},{value:"What You Can Reference",id:"what-you-can-reference",level:2},{value:"Reference Examples",id:"reference-examples",level:2},{value:"CEL Property Verification",id:"cel-property-verification",level:2},{value:"What kro Validates",id:"what-kro-validates",level:3},{value:"How kro Processes Templates",id:"how-kro-processes-templates",level:2},{value:"1. Validation Phase (RGD Creation)",id:"1-validation-phase-rgd-creation",level:3},{value:"2. Evaluation Phase (Instance Creation)",id:"2-evaluation-phase-instance-creation",level:3},{value:"3. Update Phase (Instance Updates)",id:"3-update-phase-instance-updates",level:3},{value:"Type Safety Examples",id:"type-safety-examples",level:2},{value:"Validation Errors",id:"validation-errors",level:2},{value:"Example: Unknown API or Kind",id:"example-unknown-api-or-kind",level:3},{value:"Example: Unknown Field in Definition",id:"example-unknown-field-in-definition",level:3},{value:"Example: Unknown Field in Reference",id:"example-unknown-field-in-reference",level:3},{value:"Example: Type Mismatch",id:"example-type-mismatch",level:3},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"basics",children:"Basics"})}),"\n",(0,r.jsxs)(n.p,{children:["Resources define the Kubernetes objects that kro creates and manages when users instantiate your custom API. Each resource is ",(0,r.jsx)(n.strong,{children:"valid Kubernetes YAML"})," with ",(0,r.jsx)(n.strong,{children:"CEL expressions"})," for dynamic values, enabling full type checking and validation before any resources are deployed."]}),"\n",(0,r.jsx)(n.h2,{id:"resource-structure",children:"Resource Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Every resource in an RGD requires an ",(0,r.jsx)(n.code,{children:"id"})," and a ",(0,r.jsx)(n.code,{children:"template"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: deployment\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      metadata:\n        name: my-app\n      spec:\n        replicas: 3\n        # ... rest of deployment spec ...\n\n  - id: service\n    template:\n      apiVersion: v1\n      kind: Service\n      metadata:\n        name: my-app\n      spec:\n        # ... rest of service spec ...\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Each template must be a ",(0,r.jsx)(n.strong,{children:"valid Kubernetes resource"})," with:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"apiVersion"})})," - The API version (e.g., ",(0,r.jsx)(n.code,{children:"apps/v1"}),", ",(0,r.jsx)(n.code,{children:"v1"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"kind"})})," - The resource type (e.g., ",(0,r.jsx)(n.code,{children:"Deployment"}),", ",(0,r.jsx)(n.code,{children:"Service"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"metadata"})})," - At minimum, metadata fields like ",(0,r.jsx)(n.code,{children:"name"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"id"})," uniquely identifies the resource within your RGD and is used to reference it in other resources."]}),"\n",(0,r.jsxs)(n.admonition,{title:"ID Naming Requirements",type:"note",children:[(0,r.jsxs)(n.p,{children:["Resource IDs must be in ",(0,r.jsx)(n.strong,{children:"lowerCamelCase"})," format because they're used as identifiers in CEL expressions. Dashes are not allowed, as they would be interpreted as subtraction operators in CEL."]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Valid IDs:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"deployment"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"webServer"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"postgresDatabase"})}),"\n"]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Invalid IDs:"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"web-server"})," (dash would be treated as subtraction)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WebServer"})," (should start with lowercase)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"postgres_database"})," (underscores discouraged, use camelCase)"]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"resource-templates-with-cel",children:"Resource Templates with CEL"}),"\n",(0,r.jsx)(n.p,{children:"Resource templates are structured Kubernetes manifests where specific fields contain CEL expressions that reference your schema or other resources:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: deployment\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      metadata:\n        name: ${schema.spec.name}\n      spec:\n        replicas: ${schema.spec.replicas}\n        selector:\n          matchLabels:\n            app: ${schema.spec.name}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Unlike text-based templating, kro maintains valid YAML structure throughout. The CEL expressions ",(0,r.jsx)(n.code,{children:"${...}"})," are embedded directly in field values and are type-checked against actual Kubernetes schemas when you create the ResourceGraphDefinition."]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsx)(n.p,{children:"When you create a ResourceGraphDefinition, kro validates every template and CEL expression before your API even exists. It parses each template as a real Kubernetes manifest, extracts all CEL expressions, validates the CEL syntax, and type-checks expressions against actual Kubernetes OpenAPI schemas. This means errors are caught when you create the RGD, not when users try to deploy resources."})}),"\n",(0,r.jsx)(n.h2,{id:"what-you-can-reference",children:"What You Can Reference"}),"\n",(0,r.jsx)(n.p,{children:"CEL expressions in resource templates can reference three things:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"schema.spec"})})," - User-provided configuration fields from the instance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"schema.metadata"})})," - Instance metadata (name, namespace, labels, annotations)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Other resources"})," - Any field from other resources in your RGD, including their ",(0,r.jsx)(n.code,{children:"spec"}),", ",(0,r.jsx)(n.code,{children:"metadata"}),", and ",(0,r.jsx)(n.code,{children:"status"})]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.p,{children:["When you reference another resource in a CEL expression, it automatically creates a dependency. This is an implicit way of declaring that one resource depends on another. kro uses these references to determine the correct creation order - ensuring the referenced resource exists before the one referencing it. Learn more about ",(0,r.jsx)(n.a,{href:"../dependencies-ordering",children:"Dependencies and Ordering"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"reference-examples",children:"Reference Examples"}),"\n",(0,r.jsx)(n.p,{children:"Here's a simple example showing all types of references:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: database\n    template:\n      apiVersion: database.example.com/v1\n      kind: PostgreSQL\n      metadata:\n        # Reference instance spec\n        name: ${schema.spec.name}-db\n        # Reference instance metadata\n        namespace: ${schema.metadata.namespace}\n        labels: ${schema.metadata.labels}\n      spec:\n        version: \"15\"\n        storage: ${schema.spec.storageSize}\n        replicas: 2\n\n  - id: deployment\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      metadata:\n        name: ${schema.spec.name}\n        namespace: ${schema.metadata.namespace}\n        # Reference another resource's metadata\n        annotations: ${database.metadata.annotations}\n      spec:\n        replicas: ${schema.spec.replicas}\n        selector:\n          matchLabels:\n            app: ${schema.spec.name}\n        template:\n          spec:\n            containers:\n              - name: app\n                image: ${schema.spec.image}\n                env:\n                  # Reference another resource's status\n                  - name: DATABASE_HOST\n                    value: ${database.status.endpoint}\n                  # Reference another resource's spec\n                  - name: DATABASE_VERSION\n                    value: ${database.spec.version}\n"})}),"\n",(0,r.jsx)(n.p,{children:"In this example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"database"})," references ",(0,r.jsx)(n.code,{children:"schema.spec"})," (name, storageSize) and ",(0,r.jsx)(n.code,{children:"schema.metadata"})," (namespace, labels)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"deployment"})," references ",(0,r.jsx)(n.code,{children:"schema.spec"})," (name, replicas, image), ",(0,r.jsx)(n.code,{children:"schema.metadata.namespace"}),", ",(0,r.jsx)(n.code,{children:"database.metadata.annotations"}),", ",(0,r.jsx)(n.code,{children:"database.spec.version"}),", and ",(0,r.jsx)(n.code,{children:"database.status.endpoint"})]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.p,{children:["kro automatically determines that ",(0,r.jsx)(n.code,{children:"database"})," must be created before ",(0,r.jsx)(n.code,{children:"deployment"}),". The deployment waits for the database's endpoint to be available before it can be created. Learn more about ",(0,r.jsx)(n.a,{href:"../dependencies-ordering",children:"Dependencies and Ordering"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"cel-property-verification",children:"CEL Property Verification"}),"\n",(0,r.jsxs)(n.p,{children:["kro performs extensive validation and type checking on CEL expressions ",(0,r.jsx)(n.strong,{children:"before any instances are created"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"what-kro-validates",children:"What kro Validates"}),"\n",(0,r.jsx)(n.p,{children:"When you create a ResourceGraphDefinition, kro validates every CEL expression:"}),"\n",(0,r.jsx)("div",{style:{height:"600px",overflowY:"auto"},children:(0,r.jsxs)(i.A,{children:[(0,r.jsxs)(c.A,{value:"template",label:"Template Syntax",children:[(0,r.jsxs)(n.p,{children:["kro looks for ",(0,r.jsx)(n.code,{children:"${"})," and expects to find a matching ",(0,r.jsx)(n.code,{children:"}"}),"."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# \u2713 Valid - kro finds ${ and matching }\nname: ${schema.spec.name}\n\n# \u2713 Valid - no ${, treated as literal string\nname: "my-app"\n\n# \u2717 Error - ${ found but missing closing }\nname: ${schema.spec.name\n\n# \u2717 Error - nested expressions not allowed\ncommand: ${outer(${inner})}\n\n# \u2713 Valid - nested ${} inside string literals is allowed\ncommand: ${outer("${inner}")}\n'})})]}),(0,r.jsxs)(c.A,{value:"cel",label:"CEL Expression Syntax",children:[(0,r.jsxs)(n.p,{children:["Once kro extracts the expression between ",(0,r.jsx)(n.code,{children:"${"})," and ",(0,r.jsx)(n.code,{children:"}"}),", it must be valid CEL:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# \u2713 Valid CEL expression\n${schema.spec.name}\n\n# \u2717 Incomplete expression\n${schema.spec.name +}\n\n# \u2717 Unclosed string literal\n${schema.spec.name + "suffix}\n\n# \u2717 Invalid operator\n${schema.spec.name ++ "suffix"}\n\n# \u2717 Missing closing parenthesis\n${(schema.spec.replicas + 1}\n\n# \u2717 Invalid syntax\n${schema..spec.name}\n'})})]}),(0,r.jsxs)(c.A,{value:"type",label:"Type Checking",children:[(0,r.jsx)(n.p,{children:"kro verifies that referenced fields exist in the actual Kubernetes resource schemas, that expression output types match the target field types, and that operations are valid for the data types involved."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: deployment\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      spec:\n        # \u2713 Valid: replicas expects integer, schema.spec.replicas is integer\n        replicas: ${schema.spec.replicas}\n\n        # \u2717 Type error: replicas expects integer, not string\n        replicas: ${schema.spec.name}\n"})})]}),(0,r.jsxs)(c.A,{value:"field",label:"Field Existence",children:[(0,r.jsx)(n.p,{children:"kro validates that referenced fields actually exist:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: service\n    template:\n      spec:\n        # \u2713 Valid: Deployment has spec.replicas field\n        targetPort: ${deployment.spec.replicas}\n\n        # \u2717 Field doesn't exist: Deployment has no spec.podReplicas\n        targetPort: ${deployment.spec.podReplicas}\n"})})]}),(0,r.jsxs)(c.A,{value:"schema",label:"Schema Validation",children:[(0,r.jsx)(n.p,{children:"For your custom schema, kro validates that fields referenced in templates exist in your schema definition, that types are compatible, and that required fields are present."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spec:\n  schema:\n    spec:\n      appName: string\n      replicas: integer\n\n  resources:\n    - id: deployment\n      template:\n        metadata:\n          # \u2713 Valid: schema.spec.appName exists and is string\n          name: ${schema.spec.appName}\n\n          # \u2717 Error: schema.spec.nonExistent doesn't exist\n          name: ${schema.spec.nonExistent}\n"})})]}),(0,r.jsxs)(c.A,{value:"static",label:"Static Fields",children:[(0,r.jsx)(n.p,{children:"kro also validates static fields (those without CEL expressions) against Kubernetes schemas, just like the API server:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'resources:\n  - id: deployment\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      spec:\n        # \u2713 Valid: replicas is an integer\n        replicas: 3\n\n        # \u2717 Type error: replicas must be integer, not string\n        replicas: "three"\n\n        # \u2717 Unknown field: Deployment spec has no such field\n        unknownField: value\n'})})]})]})}),"\n",(0,r.jsxs)(n.p,{children:["For more details, see ",(0,r.jsx)(n.a,{href:"../static-type-checking",children:"Static Type Checking"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"how-kro-processes-templates",children:"How kro Processes Templates"}),"\n",(0,r.jsx)(n.p,{children:"kro processes templates in several distinct phases:"}),"\n",(0,r.jsx)(n.h3,{id:"1-validation-phase-rgd-creation",children:"1. Validation Phase (RGD Creation)"}),"\n",(0,r.jsx)(n.p,{children:"When you create a ResourceGraphDefinition, kro parses all resource templates as Kubernetes manifests and extracts all CEL expressions from template fields. It validates CEL syntax, fetches actual Kubernetes OpenAPI schemas for referenced resource types, and type-checks expressions against real schemas. kro then verifies field existence in target resources, builds the dependency graph from expression references, and computes the topological order."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"All of this happens before any instances exist."})," If validation fails, the RGD is rejected."]}),"\n",(0,r.jsx)(n.h3,{id:"2-evaluation-phase-instance-creation",children:"2. Evaluation Phase (Instance Creation)"}),"\n",(0,r.jsx)(n.p,{children:"When a user creates an instance, kro processes resources in topological order:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Evaluate CEL expressions"})," - Substitute ",(0,r.jsx)(n.code,{children:"schema.spec"})," values and any available resource references. If an expression references a field that doesn't exist yet (like ",(0,r.jsx)(n.code,{children:"${database.status.endpoint}"}),"), kro requeues and waits for the value to become available."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create the resource"})," - Apply the evaluated template to Kubernetes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Wait for readiness"})," - If the resource has ",(0,r.jsx)(n.a,{href:"/kro/next/docs/concepts/rgd/resource-definitions/readiness",children:(0,r.jsx)(n.code,{children:"readyWhen"})})," conditions, wait for them to be satisfied"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Move to the next resource"})," - Repeat for each resource in dependency order"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-update-phase-instance-updates",children:"3. Update Phase (Instance Updates)"}),"\n",(0,r.jsx)(n.p,{children:"When an instance is updated, kro re-evaluates expressions with new instance values, determines which resources need updates, and updates them in topological order while preserving dependency relationships."}),"\n",(0,r.jsx)(n.h2,{id:"type-safety-examples",children:"Type Safety Examples"}),"\n",(0,r.jsx)("div",{style:{height:"450px",overflowY:"auto"},children:(0,r.jsxs)(i.A,{children:[(0,r.jsx)(c.A,{value:"integer",label:"Integer Fields",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# Deployment requires integer for replicas\nresources:\n  - id: deployment\n    template:\n      spec:\n        # \u2713 Valid: integer expression\n        replicas: ${schema.spec.replicas}\n\n        # \u2713 Valid: integer arithmetic\n        replicas: ${schema.spec.replicas * 2}\n\n        # \u2717 Type error: string value for integer field\n        replicas: ${schema.spec.name}\n"})})}),(0,r.jsx)(c.A,{value:"string",label:"String Fields",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'resources:\n  - id: deployment\n    template:\n      metadata:\n        # \u2713 Valid: string expression\n        name: ${schema.spec.name}\n\n        # \u2713 Valid: string concatenation\n        name: ${schema.spec.name + "-deployment"}\n\n        # \u2717 Type error: integer value for string field\n        name: ${schema.spec.replicas}\n'})})}),(0,r.jsx)(c.A,{value:"object",label:"Object/Map Fields",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: deployment\n    template:\n      metadata:\n        # \u2713 Valid: object/map expression\n        labels: ${schema.spec.labels}\n\n        # \u2713 Valid: accessing map values\n        annotations:\n          app: ${schema.spec.labels.app}\n"})})}),(0,r.jsx)(c.A,{value:"array",label:"Array/List Fields",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# Assuming deployment1 exists with containers defined\nresources:\n  - id: deployment2\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      spec:\n        template:\n          spec:\n            # \u2713 Valid: array of containers\n            containers: ${deployment1.spec.template.spec.containers}\n\n            # \u2717 Type error: single container object where array expected\n            containers: ${deployment1.spec.template.spec.containers[0]}\n"})})})]})}),"\n",(0,r.jsxs)(n.p,{children:["For more details, see ",(0,r.jsx)(n.a,{href:"../static-type-checking",children:"Static Type Checking"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"validation-errors",children:"Validation Errors"}),"\n",(0,r.jsxs)(n.p,{children:["When kro detects validation errors, the RGD is rejected and detailed error messages appear in the RGD's ",(0,r.jsx)(n.code,{children:"status.conditions"}),". You can inspect these with ",(0,r.jsx)(n.code,{children:"kubectl describe rgd <name>"})," or ",(0,r.jsx)(n.code,{children:"kubectl get rgd <name> -o yaml"}),". Here are common error types:"]}),"\n",(0,r.jsx)(n.h3,{id:"example-unknown-api-or-kind",children:"Example: Unknown API or Kind"}),"\n",(0,r.jsx)(n.p,{children:"If a resource references an API version or kind that doesn't exist in the cluster:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: database\n    template:\n      apiVersion: database.example.com/v1\n      kind: PostgreSQL\n      metadata:\n        name: my-db\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Condition:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'status:\n  conditions:\n    - type: ResourceGraphAccepted\n      status: "False"\n      reason: InvalidResourceGraph\n      message: "failed to get schema for resource database: schema not found"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"example-unknown-field-in-definition",children:"Example: Unknown Field in Definition"}),"\n",(0,r.jsx)(n.p,{children:"If a template contains a field that doesn't exist in the Kubernetes schema:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: deployment\n    template:\n      apiVersion: apps/v1\n      kind: Deployment\n      spec:\n        unknownField: value\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Condition:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'status:\n  conditions:\n    - type: ResourceGraphAccepted\n      status: "False"\n      reason: InvalidResourceGraph\n      message: "error getting field schema for path spec.unknownField: schema not found for field unknownField"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"example-unknown-field-in-reference",children:"Example: Unknown Field in Reference"}),"\n",(0,r.jsx)(n.p,{children:"If a CEL expression references a field that doesn't exist on another resource:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: service\n    template:\n      spec:\n        port: ${deployment.spec.nonExistentField}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Condition:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'status:\n  conditions:\n    - type: ResourceGraphAccepted\n      status: "False"\n      reason: InvalidResourceGraph\n      message: "failed to type-check template expression \\"deployment.spec.nonExistentField\\" at path \\"spec.port\\": no such member: nonExistentField"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"example-type-mismatch",children:"Example: Type Mismatch"}),"\n",(0,r.jsx)(n.p,{children:"If an expression's output type doesn't match what the target field expects:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"resources:\n  - id: deployment\n    template:\n      spec:\n        replicas: ${schema.spec.name}  # name is string, replicas needs integer\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Condition:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'status:\n  conditions:\n    - type: ResourceGraphAccepted\n      status: "False"\n      reason: InvalidResourceGraph\n      message: "type mismatch in resource \\"deployment\\" at path \\"spec.replicas\\": expression \\"schema.spec.name\\" returns type \\"string\\" but expected \\"integer\\""\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For more information about validation errors and type checking, see ",(0,r.jsx)(n.a,{href:"../static-type-checking",children:"Static Type Checking"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/kro/next/docs/concepts/rgd/cel-expressions",children:"CEL Expressions"})})," - Master CEL syntax and functions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/kro/next/docs/concepts/rgd/dependencies-ordering",children:"Dependencies & Ordering"})})," - How templates create dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/kro/next/api/specifications/simple-schema",children:"SimpleSchema"})})," - Define your API schema"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},19365:(e,n,s)=>{s.d(n,{A:()=>i});s(96540);var a=s(34164);const r={tabItem:"tabItem_Ymn6"};var t=s(74848);function i({children:e,hidden:n,className:s}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,s),hidden:n,children:e})}},11470:(e,n,s)=>{s.d(n,{A:()=>w});var a=s(96540),r=s(34164),t=s(17559),i=s(23104),c=s(56347),l=s(205),o=s(57485),d=s(31682),p=s(70679);function h(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:s}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return h(e).map((({props:{value:e,label:n,attributes:s,default:a}})=>({value:e,label:n,attributes:s,default:a})))}(s);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function x({queryString:e=!1,groupId:n}){const s=(0,c.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(r),(0,a.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})}),[r,s])]}function f(e){const{defaultValue:n,queryString:s=!1,groupId:r}=e,t=u(e),[i,c]=(0,a.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:t}))),[o,d]=x({queryString:s,groupId:r}),[h,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,r]=(0,p.Dv)(n);return[s,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),j=(()=>{const e=o??h;return m({value:e,tabValues:t})?e:null})();(0,l.A)((()=>{j&&c(j)}),[j]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),f(e)}),[d,f,t]),tabValues:t}}var j=s(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=s(74848);function v({className:e,block:n,selectedValue:s,selectValue:a,tabValues:t}){const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),o=e=>{const n=e.currentTarget,r=c.indexOf(n),i=t[r].value;i!==s&&(l(n),a(i))},d=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const s=c.indexOf(e.currentTarget)+1;n=c[s]??c[0];break}case"ArrowLeft":{const s=c.indexOf(e.currentTarget)-1;n=c[s]??c[c.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:t.map((({value:e,label:n,attributes:a})=>(0,y.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{c.push(e)},onKeyDown:d,onClick:o,...a,className:(0,r.A)("tabs__item",g.tabItem,a?.className,{"tabs__item--active":s===e}),children:n??e},e)))})}function b({lazy:e,children:n,selectedValue:s}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function k(e){const n=f(e);return(0,y.jsxs)("div",{className:(0,r.A)(t.G.tabs.container,"tabs-container",g.tabList),children:[(0,y.jsx)(v,{...n,...e}),(0,y.jsx)(b,{...n,...e})]})}function w(e){const n=(0,j.A)();return(0,y.jsx)(k,{...e,children:h(e.children)},String(n))}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var a=s(96540);const r={},t=a.createContext(r);function i(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);