"use strict";(self.webpackChunkkro_docs=self.webpackChunkkro_docs||[]).push([[4145],{23283:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"docs/concepts/instances","title":"Instances","description":"Once kro processes your ResourceGraphDefinition, it creates a new API in your cluster.","source":"@site/versioned_docs/version-0.2.0/docs/concepts/15-instances.md","sourceDirName":"docs/concepts","slug":"/docs/concepts/instances","permalink":"/kro/0.2.0/docs/concepts/instances","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-sigs/kro/tree/main/website/versioned_docs/version-0.2.0/docs/concepts/15-instances.md","tags":[],"version":"0.2.0","sidebarPosition":15,"frontMatter":{"sidebar_position":15},"sidebar":"docsSidebar","previous":{"title":"Simple Schema","permalink":"/kro/0.2.0/docs/concepts/simple-schema"},"next":{"title":"FAQ","permalink":"/kro/0.2.0/docs/faq"}}');var r=s(74848),t=s(28453);const c={sidebar_position:15},a="Instances",o={},l=[{value:"Understanding Instances",id:"understanding-instances",level:2},{value:"How kro Manages Instances",id:"how-kro-manages-instances",level:2},{value:"Monitoring Your Instances",id:"monitoring-your-instances",level:2},{value:"Understanding Status",id:"understanding-status",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"instances",children:"Instances"})}),"\n",(0,r.jsxs)(n.p,{children:["Once ",(0,r.jsx)(n.strong,{children:"kro"})," processes your ResourceGraphDefinition, it creates a new API in your cluster.\nUsers can then create instances of this API to deploy resources in a consistent,\ncontrolled way."]}),"\n",(0,r.jsx)(n.h2,{id:"understanding-instances",children:"Understanding Instances"}),"\n",(0,r.jsx)(n.p,{children:"An instance represents your deployed application. When you create an instance,\nyou're telling kro \"I want this set of resources running in my cluster\". The\ninstance contains your configuration values and serves as the single source of\ntruth for your application's desired state. Here's an example instance of our\nWebApplication API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1alpha1\nkind: WebApplication\nmetadata:\n  name: my-app\nspec:\n  name: web-app\n  image: nginx:latest\n  ingress:\n    enabled: true\n"})}),"\n",(0,r.jsx)(n.p,{children:"When you create this instance, kro:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creates all required resources (Deployment, Service, Ingress)"}),"\n",(0,r.jsx)(n.li,{children:"Configures them according to your specification"}),"\n",(0,r.jsx)(n.li,{children:"Manages them as a single unit"}),"\n",(0,r.jsx)(n.li,{children:"Keeps their status up to date"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"how-kro-manages-instances",children:"How kro Manages Instances"}),"\n",(0,r.jsx)(n.p,{children:"kro uses the standard Kubernetes reconciliation pattern to manage instances:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Observe"}),": Watches for changes to your instance or its resources"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Compare"}),": Checks if current state matches desired state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Act"}),": Creates, updates, or deletes resources as needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Report"}),": Updates status to reflect current state"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This continuous loop ensures your resources stay in sync with your desired\nstate, providing features like:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Self-healing"}),"\n",(0,r.jsx)(n.li,{children:"Automatic updates"}),"\n",(0,r.jsx)(n.li,{children:"Consistent state management"}),"\n",(0,r.jsx)(n.li,{children:"Status tracking"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-your-instances",children:"Monitoring Your Instances"}),"\n",(0,r.jsx)(n.p,{children:"KRO provides rich status information for every instance:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ kubectl get webapplication my-app\nNAME     STATUS    SYNCED   AGE\nmy-app   ACTIVE    true     30s\n"})}),"\n",(0,r.jsx)(n.p,{children:"For detailed status, check the instance's YAML:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'status:\n  state: ACTIVE # High-level instance state\n  availableReplicas: 3 # Status from Deployment\n  conditions: # Detailed status conditions\n    - type: Ready\n      status: "True"\n      lastTransitionTime: "2024-07-23T01:01:59Z"\n      reason: ResourcesAvailable\n      message: "All resources are available and configured correctly"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"understanding-status",children:"Understanding Status"}),"\n",(0,r.jsx)(n.p,{children:"Every instance includes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"State"}),": High-level status"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Running"}),": All resources are ready"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Progressing"}),": Working towards desired state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Failed"}),": Error occurred"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Terminating"}),": Being deleted"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Conditions"}),": Detailed status information"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Ready"}),": Instance is fully operational"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Progressing"}),": Changes are being applied"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Degraded"}),": Operating but not optimal"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Error"}),": Problems detected"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Resource Status"}),": Status from your resources"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Values you defined in your ResourceGraphDefinition's status section"}),"\n",(0,r.jsx)(n.li,{children:"Automatically updated as resources change"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Version Control"}),": Keep your instance definitions in version control\nalongside your application code. This helps track changes, rollback when\nneeded, and maintain configuration history."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Labels Effectively"}),": Add meaningful labels to your instances for better\norganization, filtering, and integration with other tools. kro propagates\nlabels to the sub resources for easy identification."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Active Monitoring"}),': Regularly check instance status beyond just "Running".\nWatch conditions, resource status, and events to catch potential issues early\nand understand your application\'s health.']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Regular Reviews"}),": Periodically review your instance configurations to\nensure they reflect current requirements and best practices. Update resource\nrequests, limits, and other configurations as your application needs evolve."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function c(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);