"use strict";(self.webpackChunkkro_docs=self.webpackChunkkro_docs||[]).push([[8534],{79490:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"api/crds/resourcegraphdefinition","title":"resourcegraphdefinition","description":"The ResourceGraphDefinition (RGD) is kro\'s core API for defining custom Kubernetes resources that orchestrate multiple underlying resources.","source":"@site/versioned_docs/version-0.7.1/api/crds/resourcegraphdefinition.md","sourceDirName":"api/crds","slug":"/api/crds/resourcegraphdefinition","permalink":"/kro/api/crds/resourcegraphdefinition","draft":false,"unlisted":false,"editUrl":"https://github.com/kubernetes-sigs/kro/tree/main/website/versioned_docs/version-0.7.1/api/crds/resourcegraphdefinition.md","tags":[],"version":"0.7.1","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"ResourceGraphDefinition","hide_breadcrumbs":true,"hide_table_of_contents":true},"sidebar":"apisSidebar","previous":{"title":"Reference","permalink":"/kro/api/reference"},"next":{"title":"SimpleSchema","permalink":"/kro/api/specifications/simple-schema"}}');var r=t(74848),s=t(28453),o=t(9026);const a={sidebar_position:1,sidebar_label:"ResourceGraphDefinition",hide_breadcrumbs:!0,hide_table_of_contents:!0},c="ResourceGraphDefinition",d={},p=[{value:"API Specification",id:"api-specification",level:2},{value:"Fields Reference",id:"fields-reference",level:2}];function l(e){const n={h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",...(0,s.R)(),...e.components},{Head:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t,{children:(0,r.jsx)("html",{className:"fullWidthContent"})}),"\n",(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"resourcegraphdefinition",children:"ResourceGraphDefinition"})}),"\n",(0,r.jsx)("div",{style:{fontSize:"1.2em",marginBottom:"2rem",color:"var(--ifm-color-emphasis-700)",lineHeight:"1.6"},children:(0,r.jsx)(n.p,{children:"The ResourceGraphDefinition (RGD) is kro's core API for defining custom Kubernetes resources that orchestrate multiple underlying resources."})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"api-specification",children:"API Specification"}),"\n",(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"3rem",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{flex:"1",minWidth:"200px",padding:"1.5rem",border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:"12px",background:"var(--ifm-background-color)"},children:[(0,r.jsx)("div",{style:{fontSize:"0.85em",color:"var(--ifm-color-emphasis-600)",marginBottom:"0.5rem",fontWeight:"600"},children:"API Version"}),(0,r.jsx)("code",{style:{fontSize:"1.1em",color:"var(--ifm-color-primary)",fontWeight:"600"},children:"kro.run/v1alpha1"})]}),(0,r.jsxs)("div",{style:{flex:"1",minWidth:"200px",padding:"1.5rem",border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:"12px",background:"var(--ifm-background-color)"},children:[(0,r.jsx)("div",{style:{fontSize:"0.85em",color:"var(--ifm-color-emphasis-600)",marginBottom:"0.5rem",fontWeight:"600"},children:"Kind"}),(0,r.jsx)("code",{style:{fontSize:"1.1em",color:"var(--ifm-color-primary)",fontWeight:"600"},children:"ResourceGraphDefinition"})]}),(0,r.jsxs)("div",{style:{flex:"1",minWidth:"200px",padding:"1.5rem",border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:"12px",background:"var(--ifm-background-color)"},children:[(0,r.jsx)("div",{style:{fontSize:"0.85em",color:"var(--ifm-color-emphasis-600)",marginBottom:"0.5rem",fontWeight:"600"},children:"Scope"}),(0,r.jsx)("code",{style:{fontSize:"1.1em",color:"var(--ifm-color-primary)",fontWeight:"600"},children:"Cluster"})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"fields-reference",children:"Fields Reference"}),"\n",(0,r.jsx)(o.A,{})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},9026:(e,n,t)=>{t.d(n,{A:()=>h});var i=t(96540),r=t(20382);const s={rgdReference:"rgdReference_VNj3",intro:"intro_EO70",section:"section_ViKB",tableWrapper:"tableWrapper_QDGn",fieldTable:"fieldTable_Hnxd",fieldRow:"fieldRow_yfBj",fieldName:"fieldName_m9ra",fieldNameContent:"fieldNameContent_zI7v",expandIconSpace:"expandIconSpace_Ci2C",expandIcon:"expandIcon_OiBL",fieldNameCode:"fieldNameCode_SMHV",requiredBadge:"requiredBadge_XGzt",immutableBadge:"immutableBadge_raFG",fieldType:"fieldType_ztHo",typeBadge:"typeBadge_RUiS",typeString:"typeString_LEO0",typeNumber:"typeNumber_wwQk",typeBoolean:"typeBoolean_CKwg",typeObject:"typeObject_tmBI",typeArray:"typeArray_qqd_",fieldDescription:"fieldDescription_Ul1h",noDescription:"noDescription_UHhN"},o='---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.19.0\n  name: resourcegraphdefinitions.kro.run\nspec:\n  group: kro.run\n  names:\n    kind: ResourceGraphDefinition\n    listKind: ResourceGraphDefinitionList\n    plural: resourcegraphdefinitions\n    shortNames:\n    - rgd\n    singular: resourcegraphdefinition\n  scope: Cluster\n  versions:\n  - additionalPrinterColumns:\n    - jsonPath: .spec.schema.apiVersion\n      name: APIVERSION\n      type: string\n    - jsonPath: .spec.schema.kind\n      name: KIND\n      type: string\n    - jsonPath: .status.state\n      name: STATE\n      type: string\n    - jsonPath: .status.topologicalOrder\n      name: TOPOLOGICALORDER\n      priority: 1\n      type: string\n    - jsonPath: .metadata.creationTimestamp\n      name: AGE\n      type: date\n    name: v1alpha1\n    schema:\n      openAPIV3Schema:\n        description: |-\n          ResourceGraphDefinition is the core API for defining reusable groups of Kubernetes resources.\n          It allows you to create custom resources that manage multiple underlying resources as a cohesive unit.\n          When you create a ResourceGraphDefinition, kro automatically generates a CRD and deploys a controller\n          to manage instances of your custom resource. Resources can reference each other using CEL expressions,\n          and kro ensures they are created in the correct dependency order.\n        properties:\n          apiVersion:\n            description: |-\n              APIVersion defines the versioned schema of this representation of an object.\n              Servers should convert recognized schemas to the latest internal value, and\n              may reject unrecognized values.\n              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources\n            type: string\n          kind:\n            description: |-\n              Kind is a string value representing the REST resource this object represents.\n              Servers may infer this from the endpoint the client submits requests to.\n              Cannot be updated.\n              In CamelCase.\n              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: |-\n              ResourceGraphDefinitionSpec defines the desired state of ResourceGraphDefinition.\n              It contains the schema for instances (defining the CRD structure) and the list of\n              Kubernetes resources that make up the graph.\n            properties:\n              resources:\n                description: |-\n                  Resources is the list of Kubernetes resources that will be created and managed\n                  for each instance. Resources can reference each other using CEL expressions,\n                  creating a dependency graph that determines creation order.\n                items:\n                  description: |-\n                    Resource represents a Kubernetes resource that is part of the ResourceGraphDefinition.\n                    Each resource can either be created using a template or reference an existing resource.\n                    Resources can depend on each other through CEL expressions, creating a dependency graph.\n                  properties:\n                    externalRef:\n                      description: |-\n                        ExternalRef references an existing resource in the cluster instead of creating one.\n                        This is useful for reading existing resources and using their values in other resources.\n                        Exactly one of template or externalRef must be provided.\n                      properties:\n                        apiVersion:\n                          description: |-\n                            APIVersion is the API version of the external resource.\n                            Example: "v1" for core resources, "apps/v1" for Deployments.\n                          type: string\n                        kind:\n                          description: |-\n                            Kind is the kind of the external resource.\n                            Example: "Service", "ConfigMap", "Deployment".\n                          type: string\n                        metadata:\n                          description: Metadata contains the name and optional namespace\n                            of the external resource.\n                          properties:\n                            name:\n                              description: |-\n                                Name is the name of the external resource to reference.\n                                This field is required.\n                              type: string\n                            namespace:\n                              description: |-\n                                Namespace is the namespace of the external resource.\n                                If empty, the instance\'s namespace will be used.\n                              type: string\n                          required:\n                          - name\n                          type: object\n                      required:\n                      - apiVersion\n                      - kind\n                      - metadata\n                      type: object\n                    forEach:\n                      description: |-\n                        ForEach defines iterators that expand this resource into a collection of resources.\n                        When forEach is specified, kro creates one resource instance for each element\n                        (or combination of elements when multiple iterators are specified) in the collections.\n                        Each iterator binds a variable name to a CEL expression that returns an array or map.\n                        Use iterator variables (e.g., region.item, region.index) in the template to customize each instance.\n                      items:\n                        additionalProperties:\n                          type: string\n                        description: |-\n                          ForEachIterator defines a single iterator in a forEach block.\n                          Each iterator is a map with exactly one entry where the key is the variable name\n                          and the value is the CEL expression. Example: {"region": "${schema.spec.regions}"}\n                        maxProperties: 1\n                        minProperties: 1\n                        type: object\n                      type: array\n                    id:\n                      description: |-\n                        ID is a unique identifier for this resource within the ResourceGraphDefinition.\n                        It is used to reference this resource in CEL expressions from other resources.\n                        Example: "deployment", "service", "configmap".\n                      type: string\n                    includeWhen:\n                      description: |-\n                        IncludeWhen is a list of CEL expressions that determine whether this resource should be created.\n                        All expressions must evaluate to true for the resource to be included.\n                        If not specified, the resource is always included.\n                        Example: ["schema.spec.enableMonitoring == true"]\n                      items:\n                        type: string\n                      type: array\n                    readyWhen:\n                      description: |-\n                        ReadyWhen is a list of CEL expressions that determine when this resource is considered ready.\n                        All expressions must evaluate to true for the resource to be ready.\n                        If not specified, the resource is considered ready when it exists.\n                        Example: ["self.status.phase == \'Running\'", "self.status.readyReplicas > 0"]\n                      items:\n                        type: string\n                      type: array\n                    template:\n                      description: |-\n                        Template is the Kubernetes resource manifest to create.\n                        It can contain CEL expressions (using ${...} syntax) that reference other resources.\n                        Exactly one of template or externalRef must be provided.\n                      type: object\n                      x-kubernetes-preserve-unknown-fields: true\n                  required:\n                  - id\n                  type: object\n                  x-kubernetes-validations:\n                  - message: exactly one of template or externalRef must be provided\n                    rule: (has(self.template) && !has(self.externalRef)) || (!has(self.template)\n                      && has(self.externalRef))\n                type: array\n              schema:\n                description: |-\n                  Schema defines the structure of instances created from this ResourceGraphDefinition.\n                  It specifies the API version, kind, and fields (spec/status) for the generated CRD.\n                  Use SimpleSchema syntax to define the instance schema concisely.\n                properties:\n                  additionalPrinterColumns:\n                    description: |-\n                      AdditionalPrinterColumns defines additional printer columns\n                      that will be passed down to the created CRD. If set, no\n                      default printer columns will be added to the created CRD,\n                      and if default printer columns need to be retained, they\n                      need to be added explicitly.\n                    items:\n                      description: CustomResourceColumnDefinition specifies a column\n                        for server side printing.\n                      properties:\n                        description:\n                          description: description is a human readable description\n                            of this column.\n                          type: string\n                        format:\n                          description: |-\n                            format is an optional OpenAPI type definition for this column. The \'name\' format is applied\n                            to the primary identifier column to assist in clients identifying column is the resource name.\n                            See https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types for details.\n                          type: string\n                        jsonPath:\n                          description: |-\n                            jsonPath is a simple JSON path (i.e. with array notation) which is evaluated against\n                            each custom resource to produce the value for this column.\n                          type: string\n                        name:\n                          description: name is a human readable name for the column.\n                          type: string\n                        priority:\n                          description: |-\n                            priority is an integer defining the relative importance of this column compared to others. Lower\n                            numbers are considered higher priority. Columns that may be omitted in limited space scenarios\n                            should be given a priority greater than 0.\n                          format: int32\n                          type: integer\n                        type:\n                          description: |-\n                            type is an OpenAPI type definition for this column.\n                            See https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types for details.\n                          type: string\n                      required:\n                      - jsonPath\n                      - name\n                      - type\n                      type: object\n                    type: array\n                  apiVersion:\n                    description: |-\n                      APIVersion is the version identifier for the generated CRD.\n                      Must follow Kubernetes versioning conventions (v1, v1alpha1, v1beta1, etc.).\n                      This field is immutable after creation.\n                      Example: "v1alpha1", "v1", "v2beta1"\n                    pattern: ^v[0-9]+(alpha[0-9]+|beta[0-9]+)?$\n                    type: string\n                    x-kubernetes-validations:\n                    - message: apiVersion is immutable\n                      rule: self == oldSelf\n                  group:\n                    default: kro.run\n                    description: |-\n                      Group is the API group for the generated CRD. Together with APIVersion and Kind,\n                      it forms the complete GVK (Group-Version-Kind) identifier.\n                      If omitted, defaults to "kro.run". This field is immutable after creation.\n                      Example: "mycompany.io", "databases.example.com"\n                    type: string\n                    x-kubernetes-validations:\n                    - message: group is immutable\n                      rule: self == oldSelf\n                  kind:\n                    description: |-\n                      Kind is the name of the custom resource type that will be created.\n                      This becomes the kind field of the generated CRD and must be a valid Kubernetes kind name\n                      (PascalCase, starting with a capital letter). This field is immutable after creation.\n                      Example: "WebApplication", "Database", "MicroService"\n                    pattern: ^[A-Z][a-zA-Z0-9]{0,62}$\n                    type: string\n                    x-kubernetes-validations:\n                    - message: kind is immutable\n                      rule: self == oldSelf\n                  spec:\n                    description: |-\n                      Spec defines the schema for the instance\'s spec section using SimpleSchema syntax.\n                      This becomes the OpenAPI schema for instances of the generated CRD.\n                      Use SimpleSchema\'s concise syntax to define fields, types, defaults, and validations.\n                      Example: {"replicas": "integer | default=1 | min=1 | max=10"}\n                    type: object\n                    x-kubernetes-preserve-unknown-fields: true\n                  status:\n                    description: |-\n                      Status defines the schema for the instance\'s status section using SimpleSchema syntax.\n                      Unlike spec, status fields use CEL expressions to project values from underlying resources.\n                      This allows you to surface important information from managed resources at the instance level.\n                      Example: {"connectionName": "${database.status.connectionName}", "endpoint": "${service.status.loadBalancer.ingress[0].hostname}"}\n                    type: object\n                    x-kubernetes-preserve-unknown-fields: true\n                  types:\n                    description: |-\n                      Types is a map of custom type definitions that can be referenced in the Spec.\n                      This allows you to define reusable complex types using SimpleSchema syntax.\n                      Reference custom types in Spec using the type name.\n                      Example: {"Server": {"host": "string", "port": "integer"}}\n                    type: object\n                    x-kubernetes-preserve-unknown-fields: true\n                required:\n                - apiVersion\n                - kind\n                type: object\n            required:\n            - schema\n            type: object\n          status:\n            description: |-\n              ResourceGraphDefinitionStatus defines the observed state of ResourceGraphDefinition.\n              It provides information about the deployment state, resource ordering, and conditions.\n            properties:\n              conditions:\n                description: |-\n                  Conditions represent the latest available observations of the ResourceGraphDefinition\'s state.\n                  Common condition types include "Ready", "Validated", and "ReconcilerDeployed".\n                items:\n                  description: |-\n                    Condition is the common struct used by all CRDs managed by ACK service\n                    controllers to indicate terminal states  of the CR and its backend AWS\n                    service API resource\n                  properties:\n                    lastTransitionTime:\n                      description: Last time the condition transitioned from one status\n                        to another.\n                      format: date-time\n                      type: string\n                    message:\n                      description: A human-readable message indicating details about\n                        the transition.\n                      type: string\n                    observedGeneration:\n                      description: |-\n                        observedGeneration represents the .metadata.generation that the condition was set based upon.\n                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date\n                        with respect to the current state of the instance.\n                      format: int64\n                      minimum: 0\n                      type: integer\n                    reason:\n                      description: The reason for the condition\'s last transition.\n                      type: string\n                    status:\n                      description: Status of the condition, one of True, False, Unknown.\n                      type: string\n                    type:\n                      description: Type is the type of the Condition\n                      type: string\n                  required:\n                  - status\n                  - type\n                  type: object\n                type: array\n              resources:\n                description: |-\n                  Resources provides detailed information about each resource in the graph,\n                  including their dependencies.\n                items:\n                  description: |-\n                    ResourceInformation provides detailed information about a specific resource\n                    in the ResourceGraphDefinition, particularly its dependencies on other resources.\n                  properties:\n                    dependencies:\n                      description: |-\n                        Dependencies lists all resources that this resource depends on.\n                        A resource depends on another if it references it in a CEL expression.\n                        These dependencies determine the order of resource creation.\n                      items:\n                        description: |-\n                          Dependency represents a dependency relationship between resources.\n                          When a resource uses CEL expressions to reference another resource,\n                          a dependency is created to ensure proper ordering.\n                        properties:\n                          id:\n                            description: ID is the unique identifier of the resource\n                              that this resource depends on.\n                            type: string\n                        type: object\n                      type: array\n                    id:\n                      description: ID is the unique identifier of the resource as\n                        defined in the resources list.\n                      type: string\n                  type: object\n                type: array\n              state:\n                description: |-\n                  State indicates whether the ResourceGraphDefinition is Active or Inactive.\n                  Active means the CRD has been created and the controller is running.\n                  Inactive means the ResourceGraphDefinition has been disabled or encountered an error.\n                type: string\n              topologicalOrder:\n                description: |-\n                  TopologicalOrder is the ordered list of resource IDs based on their dependencies.\n                  Resources are created in this order to ensure dependencies are satisfied.\n                  Example: ["configmap", "deployment", "service"]\n                items:\n                  type: string\n                type: array\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\n';var a=t(74848);function c(e,n,t=[]){const i={name:e,type:n.type||"unknown",description:n.description,required:t.includes(e)};if(n["x-kubernetes-validations"]){n["x-kubernetes-validations"].some((e=>e.rule?.includes("== oldSelf")))&&(i.immutable=!0)}return"array"===n.type&&n.items&&(i.type=`[]${n.items.type||"object"}`,n.items.properties&&(i.properties=Object.entries(n.items.properties).map((([e,t])=>c(e,t,n.items?.required||[]))))),"object"===n.type&&n.properties&&(i.properties=Object.entries(n.properties).map((([e,t])=>c(e,t,n.required||[])))),i}function d({field:e,depth:n=0}){const[t,r]=(0,i.useState)(n<1),o=e.properties&&e.properties.length>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:s.fieldRow,children:[(0,a.jsx)("td",{className:s.fieldName,style:{paddingLeft:48*n+16+"px",borderLeft:n>0?"2px solid var(--ifm-color-emphasis-200)":"none"},children:(0,a.jsxs)("div",{className:s.fieldNameContent,children:[(0,a.jsx)("span",{className:s.expandIconSpace,children:o&&(0,a.jsx)("button",{className:s.expandIcon,onClick:()=>r(!t),"aria-label":t?"Collapse":"Expand",children:t?"\u2212":"+"})}),(0,a.jsx)("code",{className:s.fieldNameCode,children:e.name}),e.required&&(0,a.jsx)("span",{className:s.requiredBadge,children:"required"}),e.immutable&&(0,a.jsx)("span",{className:s.immutableBadge,children:"immutable"})]})}),(0,a.jsx)("td",{className:s.fieldType,children:(0,a.jsx)("span",{className:`${s.typeBadge} ${p(e.type)}`,children:e.type})}),(0,a.jsx)("td",{className:s.fieldDescription,children:e.description?(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):(0,a.jsx)("span",{className:s.noDescription,children:"No description"})})]}),t&&o&&e.properties?.map((e=>(0,a.jsx)(d,{field:e,depth:n+1},e.name)))]})}function p(e){const n=e.replace(/\[\]/,"").toLowerCase();return"string"===n?s.typeString:"integer"===n||"number"===n?s.typeNumber:"boolean"===n?s.typeBoolean:"object"===n||"simpleschema"===n?s.typeObject:e.includes("[]")?s.typeArray:s.typeObject}function l({fields:e,title:n}){return e&&0!==e.length?(0,a.jsxs)("div",{className:s.section,children:[(0,a.jsx)("h3",{children:n}),(0,a.jsx)("div",{className:s.tableWrapper,children:(0,a.jsxs)("table",{className:s.fieldTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{width:"40%"},children:"Field"}),(0,a.jsx)("th",{style:{width:"15%"},children:"Type"}),(0,a.jsx)("th",{style:{width:"45%"},children:"Description"})]})}),(0,a.jsx)("tbody",{children:e.map((e=>(0,a.jsx)(d,{field:e},e.name)))})]})})]}):null}function h(){const e=r.Ay.load(o),{specFields:n,statusFields:t}=function(e){const n=e?.spec?.versions?.[0]?.schema?.openAPIV3Schema,t=n?.properties?.spec?.properties||{},i=n?.properties?.spec?.required||[],r=n?.properties?.status?.properties||{};return{specFields:Object.entries(t).map((([e,n])=>c(e,n,i))),statusFields:Object.entries(r).map((([e,n])=>c(e,n,[])))}}(e);return(0,a.jsxs)("div",{className:s.rgdReference,children:[(0,a.jsx)(l,{fields:n,title:"Spec"}),(0,a.jsx)(l,{fields:t,title:"Status"})]})}}}]);